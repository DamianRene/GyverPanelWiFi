# Пошаговая инструкция экспорта эффектов, созданных в программе «Jinx!»
## Шаг 1
Перейдите на сайт разработчиков [«Jinx!»](http://www.live-leds.de/downloads/) и скачайте приложение. 
Распакуйте архив с программой в отдельную папку. Запустите приложение

![Главное окно Jinx 2.4](https://github.com/vvip-68/GyverPanelWiFi/blob/master/wiki/Jinx/001.png)

## Шаг 2
Программа «Jinx!» поставляется с демо-скриптом, содержащем большое количество настроенных сцен, эффектов и переходов.  
Для подключения скрипта примера в меню "File" выберите пункт "Import"  

![Import Demo Script](https://github.com/vvip-68/GyverPanelWiFi/blob/master/wiki/Jinx/016.png)  

В окне выбора файла выберите "demo.jnx" и нажмите кнопку "Открыть"  

![Import Demo Script](https://github.com/vvip-68/GyverPanelWiFi/blob/master/wiki/Jinx/017.png)  

После того, как скрипт подключен к программе, выбор пункта меню "View Scenelist" (или нажатие кнопки F2) 

![Menu Scenelist](https://github.com/vvip-68/GyverPanelWiFi/blob/master/wiki/Jinx/018.png)  

откроет окно выбора доступных сцен.  

![Scenelist](https://github.com/vvip-68/GyverPanelWiFi/blob/master/wiki/Jinx/019.png)  

Каждая сцена содержит комбинацию эффектов, результат отображается в реальном режиме времени в панелях предпросмотра в верхней части главного окна Jinx.  
Изучите как работают и комбинируются эффекты. Изменяйте настройки каналов и смотрите как они влияют на результат.  

В интернете вы можете найти большое количество инструкций по созданию эффектов с помощью Jinx,  
доступны видеоуроки в Youtube.

## Шаг 3
Откройте окно настроек матрицы  

![Меню Setup / Matrix options](https://github.com/vvip-68/GyverPanelWiFi/blob/master/wiki/Jinx/002.png)  

и задайте размер рабочего поля в пикселях  

![Настройки матрицы](https://github.com/vvip-68/GyverPanelWiFi/blob/master/wiki/Jinx/003.png)  

Размер должен соответствовать вашей матрице, которую вы используете в своем проекте

## Шаг 4
Настройте выходное устройство, в формате которого будут сохраняться созданные вами эффекты.  
В нашем случае программа должна создавать файлы для отображения в приложении управления матрицей **Glediator**  

Откройте окно настроек выходных устройств  

![Меню Setup / Output devices](https://github.com/vvip-68/GyverPanelWiFi/blob/master/wiki/Jinx/004.png)  

![Output devices](https://github.com/vvip-68/GyverPanelWiFi/blob/master/wiki/Jinx/005.png)  

Нажмите кнопку Add ("Добавить") для добавления нового устройства

![Add/Edit device](https://github.com/vvip-68/GyverPanelWiFi/blob/master/wiki/Jinx/006.png)  

- В комбо-боксе "Device Type" выберите значение "Glediator"  
- Отметьте чекбокс "Redirect Output to File"
- Нажмите кнопку "Select"

![Select output file](https://github.com/vvip-68/GyverPanelWiFi/blob/master/wiki/Jinx/006a.png)  

Выберите файл в который по умолчанию будет сохраняться анимация эффекта.  
Если файла еще не существует - введите название в строке "Имя файла" - файл будет создан при сохранении данных.  
Нажмите кнопку "Сохранить".  
Закройте окно создания устройства. Устройство создано и готово к работе.

![Output device](https://github.com/vvip-68/GyverPanelWiFi/blob/master/wiki/Jinx/007.png)  

## Шаг 5
Далее требуется указать конфигурацию вашей матрицы - тип (зигзаг или по строкам / по колонкам), угол подключения, где находится первый светодиод и направление из этого угла.  

### Внимание!!!
>Если у вас поменялся размер матрицы или угол ее подключения - настройку следует проводить "с чистого листа".   
>То есть - в меню "File" выбрать пункт "Open", открыть файл "demo.jnx" или сохраненный вами файл настроек.   
>Задать размеры матрицы, создать выходное устройство и тип подключения матрицы.  
>Если этого не сделать - выходной файл может иметь неверный формат и вы долго будете выяснять что не так.  

Выберите в меню пункт настройки варианта подключения матрицы  

![Output patch](https://github.com/vvip-68/GyverPanelWiFi/blob/master/wiki/Jinx/008.png)  

В открывшемся окне представлена схема матрицы, на которую должны выводиться эффекты.  
Красными представлены пиксели для которых еще не назначено соответствие светодиодам матрицы  

![Output patch](https://github.com/vvip-68/GyverPanelWiFi/blob/master/wiki/Jinx/009.png)  

В комбобоксе "Patch Device" выберите созданное на предыдущем шаге устройство

![Output patch - Select Device](https://github.com/vvip-68/GyverPanelWiFi/blob/master/wiki/Jinx/010.png)  

Выберите левую верхнюю ячейку виртуальной матрицы   
Нажмите кнопку "Fast Patch"  

![Output patch - Select Device](https://github.com/vvip-68/GyverPanelWiFi/blob/master/wiki/Jinx/011.png)  

1. Укажите размеры матрицы  
2. Выберите устройство  
3. Выберите порядок следования цветов в вашей ленте. Возможно с этим параметром придется поэкспериментировать, если в результате экспорта эффект отображается не теми цветами.
4. Выберите направление светодиодов из угла подключения матрицы В комбобоксе "Patch Mode"

![Fast Patch](https://github.com/vvip-68/GyverPanelWiFi/blob/master/wiki/Jinx/012.png)  

Доступны следующие варианты:

![Fast Patch](https://github.com/vvip-68/GyverPanelWiFi/blob/master/wiki/Jinx/013.png)  

- Linewise starting Top-Left - Левый верхний угол, параллельно по строкам слева направо
- Linewise starting Top-Right - Правый верхний угол, параллельно по строкам справа налево
- Linewise starting Bottom-Left - Левый нижний угол, параллельно по строкам слева направо
- Linewise starting Bottom-Right - Правый верхний угол, параллельно по строкам справа налево
- Snakelines starting Top-Left - Левый верхний угол, зигзаг направление вправо
- Snakelines starting Top-Right - Правый верхний угол, зигзаг направление влево
- Snakelines starting Bottom-Left - Левый нижний угол, зигзаг направление вправо
- Snakelines starting Bottom-Right - Правый нижний угол, зигзаг направление влево
- Columnwise starting Top-Left - Левый верхний угол, параллельно по колонкам сверху вниз
- Columnwise starting Top-Right - Правый верхний угол, параллельно по колонкам сверху вниз
- Columnwise starting Bottom-Left - Левый нижний угол, параллельно по колонкам снизу вверх
- Columnwise starting Bottom-Right - Правый нижний угол, параллельно по колонкам снизу вверх
- Snakecolumns starting Top-Left - Левый верхний угол, зигзаг, направление вниз
- Snakecolumns starting Top-Right - Правый верхний угол, зигзаг, направление вниз
- Snakecolumns starting Bottom-Left - Левый нижний угол, зигзаг, направление вверх
- Snakecolumns starting Bottom-Right - Правый нижний угол, зигзаг, направление вверх

Если направление и угол подключения матрицы выбраны неверно - эффект может отображаться зеркально, перевернутым или вообще без внятного рисунка, если перепутан угол подключения и ширина матрицы не равна ее высоте или перепутаны параллельный тип матрицы  и зигзаг, строки и колонки.  

Завершите конфигурирование параметров матрицы, нажав на кнопку "OK"  

![Fast Patch](https://github.com/vvip-68/GyverPanelWiFi/blob/master/wiki/Jinx/014.png)  

Теперь клетки матрицы имеют зеленый цвет, что означает, что каждой ячейке виртуальной / программной матрицы назначен светодиод физической матрицы  

![Output patch](https://github.com/vvip-68/GyverPanelWiFi/blob/master/wiki/Jinx/015.png)  

Нажмите кнопку "ОК" для завершения настройки.

## Шаг 6
Итак, эффект создан или выбран один из готовых примеров. Он отображается в реальном режиме времени в центральной панели, являющейся результатом смешивания эффектов из правой и левой панелей предварительного просмотра. Можно сохранить эффект в файл, который позже будет воспроизведен на вашей матрице.  

![Start output](https://github.com/vvip-68/GyverPanelWiFi/blob/master/wiki/Jinx/020.png)  

Для начала экспорта в меню "Setup" выберите пункт "Start Output". Нажмите на него в подходящий момент, наблюдая за отображением в панели предпросмотра.  
Дождитесь завершения воспроизведения эффекта и повторно нажмите на пункт "Start Output". Запись анимации будет остановлена.  
Сохраняйте достаточно длинные фрагменты - от этого зависит продолжительность воспроизведения эффекта на вашей матрице.  

Найдите cохраненный файл в папке, которую вы настроиле на Шаге 3  

![Find output](https://github.com/vvip-68/GyverPanelWiFi/blob/master/wiki/Jinx/021.png)  

Откройте в Проводнике вашу SD-карту  
Создайте в корне SD арточки папку, соответствующую размерам вашей матрицы.  
В примере это папка "48x16".

![Copy output file](https://github.com/vvip-68/GyverPanelWiFi/blob/master/wiki/Jinx/022.png)  

Скопируйте файл из папки Jinx в папку на SD карточке. Файл может иметь любое имя, но расширение файла должно обязательно быть ".out"  
Имена файлов можете задать просто по порядку "001.out", "002.out", "003.out" и так далее  
или дать эффектам осмысленные названия, например "Hellfire.out", "Rain drops.out", "New Year.out"  и т.п  

### Внимание!!!
> Имена файлов эффектов НЕ ДОЛЖНЫ содержать кириллицу! Допускаются только буквы латинского алфавита, цифры и некоторые символы. 

Экспортируйте другие эффекты, повторяя описанные в Шаге 6 действия.  
Текущая версия микропрограммы поддерживает до 128 различных эффектов.  

## Шаг 7
Вставьте SD-карту в ваш контроллер, перезагрузите его, нажав на кнопку сброса.  
Если у вас включен монитор порта, вы увидите сообщение о том, что карта обнаружена и на ней найдены файлы с вашими эффектами  

![Монитор порта](https://github.com/vvip-68/GyverPanelWiFi/blob/master/wiki/Jinx/023.png)  

Подключите телефон к матрице, перейдите в раздел эффектов, в комбобоксе выбора эффекта выберите "SD-карта"  
Эффект должен начать воспроизводиться на вашей Матрице.  
Если цвета эффекта не совпадают с теми, что отображаются в Jinx или изображение перевернуто или не читается вовсе,  
вернитесь к настройкам матрицы в Jinx, проверьте корректность указанных размеров, порядка цветов RGB/GRB/...,  
настройки точки подключения матрицы.  




